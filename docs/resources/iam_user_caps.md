---
subcategory: "IAM (Identity & Access Management)"
page_title: "RadosGW: radosgw_iam_user_caps"
description: |-
  Manages RadosGW user capabilities. Capabilities control administrative permissions for a user.
  Capabilities are defined as a set of type/permission pairs. Each capability type can only appear once in the set.
  Use perm = "*" for full access instead of specifying separate read and write entries.
  The provider automatically:
  Sorts capabilities alphabetically by type to prevent unnecessary changesValidates that no duplicate capability types are specified
  On deletion, all specified capabilities are removed from the user.
---

# radosgw_iam_user_caps

Manages RadosGW user capabilities. Capabilities control administrative permissions for a user.

Capabilities are defined as a set of type/permission pairs. Each capability type can only appear once in the set.
Use `perm = "*"` for full access instead of specifying separate read and write entries.

The provider automatically:
- Sorts capabilities alphabetically by type to prevent unnecessary changes
- Validates that no duplicate capability types are specified

On deletion, all specified capabilities are removed from the user.

## Example Usage

```terraform
# Grant administrative capabilities to a user
resource "radosgw_iam_user_caps" "admin_caps" {
  user_id = radosgw_iam_user.example.user_id

  caps = [
    {
      type = "buckets"
      perm = "*"
    },
    {
      type = "users"
      perm = "*"
    }
  ]
}

# Grant read-only capabilities
resource "radosgw_iam_user_caps" "readonly_caps" {
  user_id = radosgw_iam_user.readonly.user_id

  caps = [
    {
      type = "buckets"
      perm = "read"
    },
    {
      type = "users"
      perm = "read"
    },
    {
      type = "usage"
      perm = "read"
    }
  ]
}

# Grant specific capabilities for bucket management
resource "radosgw_iam_user_caps" "bucket_admin" {
  user_id = radosgw_iam_user.bucket_admin.user_id

  caps = [
    {
      type = "buckets"
      perm = "*"
    },
    {
      type = "metadata"
      perm = "read"
    }
  ]
}

# Use perm = "*" for full access (read + write)
# Note: Each capability type can only appear once in the caps set
resource "radosgw_iam_user_caps" "full_access_caps" {
  user_id = radosgw_iam_user.example.user_id

  caps = [
    {
      type = "users"
      perm = "*" # Full access (equivalent to read + write)
    },
    {
      type = "usage"
      perm = "read" # Read-only access
    }
  ]
}

# Reference user resources
resource "radosgw_iam_user" "example" {
  user_id      = "caps-example-user"
  display_name = "Caps Example User"
}

resource "radosgw_iam_user" "readonly" {
  user_id      = "readonly-user"
  display_name = "Read-only User"
}

resource "radosgw_iam_user" "bucket_admin" {
  user_id      = "bucket-admin-user"
  display_name = "Bucket Admin User"
}
```

<!-- schema generated by tfplugindocs -->

## Argument Reference

The following arguments are supported:


* `caps` - (Required) Set of capabilities to grant to the user. Each capability has a type and permission level. (see [below for nested schema](#nestedatt--caps))
* `user_id` - (Required) The user ID to manage capabilities for.


## Attributes Reference

The following attributes are exported:

* `caps` - See Argument Reference above.
* `user_id` - See Argument Reference above.

<a id="nestedatt--caps"></a>
### Nested Schema for `caps`

Required:

- `perm` (String) The permission level. Valid values: `*` (full access), `read`, `write`. Note: Ceph converts `read` + `write` to `*` internally.
- `type` (String) The capability type. Valid values: `users`, `buckets`, `metadata`, `usage`, `zone`, `info`, `accounts`, `ratelimit`, `roles`, `user-policy`, `amz-cache`, `oidc-provider`, `bilog`, `mdlog`, `datalog`.

## Import

Import is supported using the following syntax:

```shell
# Import user capabilities by user_id
# The capabilities will be read from the existing user in RadosGW
terraform import radosgw_iam_user_caps.admin_caps "example-user"
```

---
subcategory: "IAM (Identity & Access Management)"
page_title: "RadosGW: radosgw_iam_access_key"
description: |-
  Manages an IAM access key for S3 or Swift access in RadosGW.
  S3 keys: Multiple access keys per user are supported. Keys are identified by access_key.
  Swift keys: Only one access key per subuser is supported. Creating a new key replaces the existing one. Requires a subuser attribute.
  Note: Managing multiple S3 keys per user requires Ceph Squid (19.x) or higher. Older versions (Reef 18.x) may have issues with key deletion when multiple keys exist.
---

# radosgw_iam_access_key

Manages an IAM access key for S3 or Swift access in RadosGW.

**S3 keys:** Multiple access keys per user are supported. Keys are identified by `access_key`.

**Swift keys:** Only one access key per subuser is supported. Creating a new key replaces the existing one. Requires a `subuser` attribute.

**Note:** Managing multiple S3 keys per user requires Ceph Squid (19.x) or higher. Older versions (Reef 18.x) may have issues with key deletion when multiple keys exist.

## Example Usage

```terraform
# Create an auto-generated S3 access key
resource "radosgw_iam_access_key" "auto_generated" {
  user_id = radosgw_iam_user.example.user_id
  # access_key and secret_key will be auto-generated
}

# Create an S3 access key with custom credentials
resource "radosgw_iam_access_key" "custom" {
  user_id    = radosgw_iam_user.example.user_id
  access_key = "MY_CUSTOM_ACCESS_KEY"
  secret_key = "MyCustomSecretKey123456789012345678901234"
}

# Create a Swift access key for a subuser
resource "radosgw_iam_access_key" "swift" {
  user_id    = radosgw_iam_user.example.user_id
  subuser    = radosgw_iam_subuser.swift.subuser
  key_type   = "swift"
  secret_key = "swift_secret_password"
}

# Reference resources
resource "radosgw_iam_user" "example" {
  user_id      = "key-example-user"
  display_name = "Key Example User"
}

resource "radosgw_iam_subuser" "swift" {
  user_id = radosgw_iam_user.example.user_id
  subuser = "swiftuser"
  access  = "full-control"
}

# Output the auto-generated keys
output "auto_access_key" {
  value     = radosgw_iam_access_key.auto_generated.access_key
  sensitive = true
}

output "auto_secret_key" {
  value     = radosgw_iam_access_key.auto_generated.secret_key
  sensitive = true
}
```

<!-- schema generated by tfplugindocs -->

## Argument Reference

The following arguments are supported:


* `user_id` - (Required) The user ID for which to create the key.


* `access_key` - (Optional) The access key. For S3 keys: if not provided, it will be auto-generated. For Swift keys: this is computed as `user_id:subuser`. Changing this value will force resource replacement.
* `key_type` - (Optional) The type of key. Valid values: `s3` (default), `swift`.
* `secret_key` - (Optional) The secret key. If not provided, it will be auto-generated. Changing this value will update the key in place.
* `subuser` - (Optional) The subuser name (without the user prefix). Required for Swift keys, not used for S3 keys.




## Attributes Reference

The following attributes are exported:

* `generated` - Whether the key was auto-generated (true) or user-specified (false). Only applicable for S3 keys.
* `id` - The resource identifier. For S3 keys: the `access_key`. For Swift keys: `user_id:subuser`.
* `user_id` - See Argument Reference above.
* `access_key` - See Argument Reference above.
* `key_type` - See Argument Reference above.
* `secret_key` - See Argument Reference above.
* `subuser` - See Argument Reference above.
## Import

Import is supported using the following syntax:

```shell
# Import an S3 access key
# Format: s3:user_id:access_key
terraform import radosgw_iam_access_key.custom "s3:example-user:MY_CUSTOM_ACCESS_KEY"

# Import a Swift access key
# Format: swift:user_id:subuser
terraform import radosgw_iam_access_key.swift "swift:example-user:swiftuser"
```

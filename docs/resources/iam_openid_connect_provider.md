---
subcategory: "IAM (Identity & Access Management)"
page_title: "RadosGW: radosgw_iam_openid_connect_provider"
description: |-
  Manages an OpenID Connect (OIDC) identity provider in RadosGW. This resource allows you to establish trust between RadosGW and an external OpenID Connect provider for federated authentication.
  ~> Note: RadosGW normalizes OIDC provider URLs by stripping the protocol (http://, https://) when constructing ARNs. This means http://example.com and https://example.com would result in the same ARN arn:aws:iam:::oidc-provider/example.com. You cannot create separate providers for the same domain with different protocols. Changing the protocol in the URL triggers resource replacement.
---

# radosgw_iam_openid_connect_provider

Manages an OpenID Connect (OIDC) identity provider in RadosGW. This resource allows you to establish trust between RadosGW and an external OpenID Connect provider for federated authentication.

~> **Note:** RadosGW normalizes OIDC provider URLs by stripping the protocol (`http://`, `https://`) when constructing ARNs. This means `http://example.com` and `https://example.com` would result in the **same** ARN `arn:aws:iam:::oidc-provider/example.com`. You cannot create separate providers for the same domain with different protocols. Changing the protocol in the URL triggers resource replacement.

## Example Usage

```terraform
# Create an OIDC provider for Google
resource "radosgw_iam_openid_connect_provider" "google" {
  url = "https://accounts.google.com"

  client_id_list = [
    "123456789012-abcdefghijklmnopqrstuvwxyz.apps.googleusercontent.com"
  ]

  thumbprint_list = [
    "1234567890abcdef1234567890abcdef12345678"
  ]

  # Set to false to prevent updates after creation
  allow_updates = false
}

# Create an OIDC provider for Keycloak
resource "radosgw_iam_openid_connect_provider" "keycloak" {
  url = "https://keycloak.example.com/auth/realms/myrealm"

  client_id_list = [
    "my-app-client",
    "another-app-client"
  ]

  thumbprint_list = [
    "abcdef1234567890abcdef1234567890abcdef12"
  ]

  # Allow updates to client_ids and thumbprints
  allow_updates = true
}

# Create an OIDC provider for AWS Cognito
resource "radosgw_iam_openid_connect_provider" "cognito" {
  url = "https://cognito-idp.us-east-1.amazonaws.com/us-east-1_XXXXXXXXX"

  client_id_list = [
    "1234567890abcdefghij"
  ]

  thumbprint_list = [
    "9e99a48a9960b14926bb7f3b02e22da2b0ab7280"
  ]
}
```

<!-- schema generated by tfplugindocs -->

## Argument Reference

The following arguments are supported:


* `client_id_list` - (Required) List of client IDs (also known as audiences) that are allowed to authenticate with this provider. These values correspond to the `aud` claim in OIDC tokens.
* `thumbprint_list` - (Required) List of certificate thumbprints for the OpenID Connect provider's IDP certificate(s). Each thumbprint is a hex-encoded SHA-1 hash (40 characters). A maximum of 5 thumbprints are allowed.
* `url` - (Required) URL of the identity provider. This value corresponds to the `iss` claim in OIDC tokens. Must include the protocol (`http://` or `https://`). The full URL is stored and used when RadosGW contacts the OIDC provider, but the protocol is stripped when constructing the ARN.


* `allow_updates` - (Optional) Whether to allow in-place updates for `client_id_list` and `thumbprint_list`. When `true` (default), changes will be applied in-place. When `false`, changes to these attributes will destroy and recreate the provider. **Note:** In-place updates require Ceph Tentacle (20.x). On older versions, set to `false`.




## Attributes Reference

The following attributes are exported:

* `arn` - Amazon Resource Name (ARN) of the OIDC provider. Format: `arn:aws:iam:::oidc-provider/<url>` (URL portion excludes protocol).
* `client_id_list` - See Argument Reference above.
* `thumbprint_list` - See Argument Reference above.
* `url` - See Argument Reference above.
* `allow_updates` - See Argument Reference above.
## Import

Import is supported using the following syntax:

```shell
# Import an OIDC provider by ARN
terraform import radosgw_iam_openid_connect_provider.google "arn:aws:iam:::oidc-provider/accounts.google.com"

# Import a Keycloak OIDC provider
terraform import radosgw_iam_openid_connect_provider.keycloak "arn:aws:iam:::oidc-provider/keycloak.example.com/auth/realms/myrealm"
```

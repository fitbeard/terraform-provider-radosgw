---
subcategory: "IAM (Identity & Access Management)"
page_title: "RadosGW: radosgw_iam_policy_document"
description: |-
  Generates an IAM policy document in JSON format for use with resources that require policies, such as radosgw_iam_role, radosgw_iam_role_policy, and radosgw_s3_bucket_policy. This data source allows you to define policies using HCL instead of writing raw JSON.
---

# radosgw_iam_policy_document

Generates an IAM policy document in JSON format for use with resources that require policies, such as `radosgw_iam_role`, `radosgw_iam_role_policy`, and `radosgw_s3_bucket_policy`. This data source allows you to define policies using HCL instead of writing raw JSON.

## Example Usage

```terraform
# Basic policy document for S3 access
data "radosgw_iam_policy_document" "s3_access" {
  statement {
    sid    = "AllowS3Access"
    effect = "Allow"

    actions = [
      "s3:GetObject",
      "s3:PutObject",
      "s3:DeleteObject",
      "s3:ListBucket"
    ]

    resources = [
      "arn:aws:s3:::my-bucket",
      "arn:aws:s3:::my-bucket/*"
    ]
  }
}

# Trust policy for OIDC provider with conditions
data "radosgw_iam_policy_document" "trust_policy" {
  statement {
    effect  = "Allow"
    actions = ["sts:AssumeRoleWithWebIdentity"]

    principals {
      type        = "Federated"
      identifiers = ["arn:aws:iam:::oidc-provider/accounts.google.com"]
    }

    condition {
      test     = "StringEquals"
      variable = "accounts.google.com:aud"
      values   = ["my-client-id"]
    }

    condition {
      test     = "StringEquals"
      variable = "accounts.google.com:sub"
      values   = ["user@example.com"]
    }
  }
}

# Policy document with multiple statements
data "radosgw_iam_policy_document" "multi_statement" {
  statement {
    sid     = "AllowReadAccess"
    effect  = "Allow"
    actions = ["s3:GetObject", "s3:ListBucket"]
    resources = [
      "arn:aws:s3:::public-bucket",
      "arn:aws:s3:::public-bucket/*"
    ]
  }

  statement {
    sid     = "AllowWriteAccess"
    effect  = "Allow"
    actions = ["s3:PutObject"]
    resources = [
      "arn:aws:s3:::upload-bucket/*"
    ]
  }

  statement {
    sid       = "DenyDeleteAccess"
    effect    = "Deny"
    actions   = ["s3:DeleteObject"]
    resources = ["*"]
  }
}

# Use the policy documents with roles
resource "radosgw_role" "example" {
  name               = "ExampleRole"
  assume_role_policy = data.radosgw_iam_policy_document.trust_policy.json
}

resource "radosgw_role_policy" "example" {
  role   = radosgw_role.example.name
  name   = "S3AccessPolicy"
  policy = data.radosgw_iam_policy_document.s3_access.json
}

# Bucket policy example - public read access
data "radosgw_iam_policy_document" "public_bucket" {
  statement {
    sid    = "PublicReadAccess"
    effect = "Allow"

    principals {
      type        = "*"
      identifiers = ["*"]
    }

    actions   = ["s3:GetObject"]
    resources = ["arn:aws:s3:::my-public-bucket/*"]
  }
}

# Use with bucket_policy resource
resource "radosgw_s3_bucket" "public" {
  bucket = "my-public-bucket"
}

resource "radosgw_s3_bucket_policy" "public" {
  bucket = radosgw_s3_bucket.public.bucket
  policy = data.radosgw_iam_policy_document.public_bucket.json
}

# Output the generated JSON
output "s3_policy_json" {
  value = data.radosgw_iam_policy_document.s3_access.json
}

output "trust_policy_json" {
  value = data.radosgw_iam_policy_document.trust_policy.json
}

output "bucket_policy_json" {
  value = data.radosgw_iam_policy_document.public_bucket.json
}
```

<!-- schema generated by tfplugindocs -->

## Argument Reference

The following arguments are supported:


* `policy_id` - (Optional) Optional identifier for the policy.
* `statement` - (Optional) A policy statement. Multiple statements can be specified. (see [below for nested schema](#nestedblock--statement))
* `version` - (Optional) IAM policy document version. Valid values: `2012-10-17` (default), `2008-10-17`.




## Attributes Reference

The following attributes are exported:

* `json` - The generated IAM policy document in JSON format.
* `policy_id` - See Argument Reference above.
* `statement` - See Argument Reference above.
* `version` - See Argument Reference above.

<a id="nestedblock--statement"></a>
### Nested Schema for `statement`



- `actions` (Set of String) List of actions that this statement applies to (e.g., `s3:GetObject`, `s3:*`).
- `condition` (Block List) Condition that must be satisfied for this statement to apply. (see [below for nested schema](#nestedblock--statement--condition))
- `effect` (String) Whether this statement allows or denies access. Valid values: `Allow`, `Deny`. Default: `Allow`.
- `not_actions` (Set of String) List of actions that this statement does NOT apply to. Use with `Allow` to create an allow-all-except policy.
- `not_principals` (Block List) Principal to which this statement does NOT apply. (see [below for nested schema](#nestedblock--statement--not_principals))
- `not_resources` (Set of String) List of resources that this statement does NOT apply to.
- `principals` (Block List) Principal (entity) to which this statement applies. (see [below for nested schema](#nestedblock--statement--principals))
- `resources` (Set of String) List of resources that this statement applies to (e.g., `arn:aws:s3:::bucket/*`).
- `sid` (String) Optional statement identifier.


<a id="nestedblock--statement--condition"></a>
### Nested Schema for `statement.condition`

Required:

- `test` (String) Condition operator (e.g., `StringEquals`, `StringLike`, `ArnLike`).
- `values` (List of String) Values to compare against the context key.
- `variable` (String) Context key to evaluate (e.g., `aws:username`, `s3:prefix`).



<a id="nestedblock--statement--not_principals"></a>
### Nested Schema for `statement.not_principals`

Required:

- `identifiers` (Set of String) List of identifiers for the principal.
- `type` (String) Type of principal. Valid values: `AWS`, `Federated`, `*`. Note: `Service` principals are not supported in RadosGW.



<a id="nestedblock--statement--principals"></a>
### Nested Schema for `statement.principals`

Required:

- `identifiers` (Set of String) List of identifiers for the principal (e.g., ARNs, account IDs, `*`).
- `type` (String) Type of principal. Valid values: `AWS`, `Federated`, `*`. Note: `Service` principals are not supported in RadosGW.

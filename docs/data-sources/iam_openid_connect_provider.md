---
subcategory: "IAM (Identity & Access Management)"
page_title: "RadosGW: radosgw_iam_openid_connect_provider"
description: |-
  Retrieves information about an OpenID Connect (OIDC) identity provider in RadosGW. Use this data source to get details about an existing OIDC provider by its ARN or URL.
  ~> Note: RadosGW normalizes OIDC provider URLs by stripping the protocol (http://, https://) when constructing ARNs. This means http://example.com and https://example.com refer to the same OIDC provider with ARN arn:aws:iam:::oidc-provider/example.com. You cannot have separate providers for the same domain with different protocols.
---

# radosgw_iam_openid_connect_provider

Retrieves information about an OpenID Connect (OIDC) identity provider in RadosGW. Use this data source to get details about an existing OIDC provider by its ARN or URL.

~> **Note:** RadosGW normalizes OIDC provider URLs by stripping the protocol (`http://`, `https://`) when constructing ARNs. This means `http://example.com` and `https://example.com` refer to the **same** OIDC provider with ARN `arn:aws:iam:::oidc-provider/example.com`. You cannot have separate providers for the same domain with different protocols.

## Example Usage

```terraform
# Lookup OIDC provider by ARN
data "radosgw_iam_openid_connect_provider" "by_arn" {
  arn = "arn:aws:iam:::oidc-provider/accounts.google.com"
}

# Lookup OIDC provider by URL (without protocol)
data "radosgw_iam_openid_connect_provider" "by_url" {
  url = "accounts.google.com"
}

# Lookup OIDC provider by URL (with https:// protocol)
data "radosgw_iam_openid_connect_provider" "by_url_https" {
  url = "https://keycloak.example.com/auth/realms/myrealm"
}

# Use data source to reference an existing OIDC provider in a trust policy
data "radosgw_iam_openid_connect_provider" "google" {
  url = "accounts.google.com"
}

data "radosgw_policy_document" "assume_role_with_oidc" {
  statement {
    effect  = "Allow"
    actions = ["sts:AssumeRoleWithWebIdentity"]

    principals {
      type        = "Federated"
      identifiers = [data.radosgw_iam_openid_connect_provider.google.arn]
    }

    condition {
      test     = "StringEquals"
      variable = "${data.radosgw_iam_openid_connect_provider.google.url}:aud"
      values   = tolist(data.radosgw_iam_openid_connect_provider.google.client_id_list)
    }
  }
}

resource "radosgw_role" "oidc_role" {
  name               = "OIDCFederatedRole"
  assume_role_policy = data.radosgw_policy_document.assume_role_with_oidc.json
}

# Output OIDC provider details
output "google_oidc_arn" {
  description = "ARN of the Google OIDC provider"
  value       = data.radosgw_iam_openid_connect_provider.google.arn
}

output "google_oidc_url" {
  description = "URL of the Google OIDC provider"
  value       = data.radosgw_iam_openid_connect_provider.google.url
}

output "google_oidc_client_ids" {
  description = "Client IDs registered with the Google OIDC provider"
  value       = data.radosgw_iam_openid_connect_provider.google.client_id_list
}

output "google_oidc_thumbprints" {
  description = "Certificate thumbprints for the Google OIDC provider"
  value       = data.radosgw_iam_openid_connect_provider.google.thumbprint_list
}
```

<!-- schema generated by tfplugindocs -->

## Argument Reference

The following arguments are supported:


* `arn` - (Optional) Amazon Resource Name (ARN) of the OIDC provider. Format: `arn:aws:iam:::oidc-provider/<url>` (URL portion excludes protocol). Exactly one of `arn` or `url` must be specified.
* `url` - (Optional) URL of the identity provider. This value corresponds to the `iss` claim in OIDC tokens. Can be specified with or without the protocol prefix (`http://` or `https://`). The protocol is stripped for matching against provider ARNs. Exactly one of `arn` or `url` must be specified.



## Attributes Reference

The following attributes are exported:

* `client_id_list` - List of client IDs (also known as audiences) that are registered with this provider. These values correspond to the `aud` claim in OIDC tokens.
* `thumbprint_list` - List of certificate thumbprints for the OpenID Connect provider's IDP certificate(s). Each thumbprint is a hex-encoded SHA-1 hash (40 characters).
* `arn` - See Argument Reference above.
* `url` - See Argument Reference above.
